{"title":"Ubuntu Ollama Docker 安装","uid":"dc7e72ed35a1474e787e462e2495f21d","slug":"Ubuntu Ollama Docker 安装","date":"2024-07-16T05:23:40.156Z","updated":"2024-07-16T09:17:33.262Z","comments":true,"path":"api/articles/Ubuntu Ollama Docker 安装.json","keywords":null,"cover":null,"content":"<h1 id=\"1Panel-安装\"><a href=\"#1Panel-安装\" class=\"headerlink\" title=\"1Panel 安装\"></a>1Panel 安装</h1><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh -o quick_start.sh &amp;&amp; <span class=\"built_in\">sudo</span> bash quick_start.sh</span><br></pre></td></tr></table></figure>\n\n<p>启用防火墙并开放 <code>11434</code> 端口</p>\n<h1 id=\"Ollama-安装\"><a href=\"#Ollama-安装\" class=\"headerlink\" title=\"Ollama 安装\"></a>Ollama 安装</h1><h2 id=\"Nvidia-GPU\"><a href=\"#Nvidia-GPU\" class=\"headerlink\" title=\"Nvidia GPU\"></a>Nvidia GPU</h2><h3 id=\"1-配置存储库\"><a href=\"#1-配置存储库\" class=\"headerlink\" title=\"1.配置存储库\"></a>1.配置存储库</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -fsSL https://nvidia.github.io/libnvidia-container/gpgkey \\</span><br><span class=\"line\">    | <span class=\"built_in\">sudo</span> gpg --dearmor -o /usr/share/keyrings/nvidia-container-toolkit-keyring.gpg</span><br><span class=\"line\">curl -s -L https://nvidia.github.io/libnvidia-container/stable/deb/nvidia-container-toolkit.list \\</span><br><span class=\"line\">    | sed <span class=\"string\">&#x27;s#deb https://#deb [signed-by=/usr/share/keyrings/nvidia-container-toolkit-keyring.gpg] https://#g&#x27;</span> \\</span><br><span class=\"line\">    | <span class=\"built_in\">sudo</span> <span class=\"built_in\">tee</span> /etc/apt/sources.list.d/nvidia-container-toolkit.list</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get update</span><br></pre></td></tr></table></figure>\n\n<p>如果遇到网络问题，可能需要使用 <code>proxychains</code> 来进行代理</p>\n<h3 id=\"2-安装-NVIDIA-Container-Toolkit-软件包\"><a href=\"#2-安装-NVIDIA-Container-Toolkit-软件包\" class=\"headerlink\" title=\"2.安装 NVIDIA Container Toolkit 软件包\"></a>2.安装 NVIDIA Container Toolkit 软件包</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> apt-get install -y nvidia-container-toolkit</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"3-配置-Docker-使用-Nvidia-驱动程序\"><a href=\"#3-配置-Docker-使用-Nvidia-驱动程序\" class=\"headerlink\" title=\"3.配置 Docker 使用 Nvidia 驱动程序\"></a>3.配置 Docker 使用 Nvidia 驱动程序</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">sudo</span> nvidia-ctk runtime configure --runtime=docker</span><br><span class=\"line\"><span class=\"built_in\">sudo</span> systemctl restart docker</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"4-启动容器\"><a href=\"#4-启动容器\" class=\"headerlink\" title=\"4.启动容器\"></a>4.启动容器</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker run -d --gpus=all -v ollama:/root/.ollama -p 11434:11434 --name ollama ollama/ollama</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"5-设置自启动\"><a href=\"#5-设置自启动\" class=\"headerlink\" title=\"5.设置自启动\"></a>5.设置自启动</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">docker update --restart=always &lt;container <span class=\"built_in\">id</span>&gt;</span><br></pre></td></tr></table></figure>\n\n<p>访问 <a href=\"http://127.0.0.1:11434/\">http://127.0.0.1:11434/</a> 显示 Ollama is running 即为安装成功</p>\n","feature":false,"text":"1Panel 安装1curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh...","permalink":"/post/Ubuntu Ollama Docker 安装","photos":[],"count_time":{"symbolsCount":"1.1k","symbolsTime":"1 mins."},"categories":[{"name":"AIGC","slug":"AIGC","count":3,"path":"api/categories/AIGC.json"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","count":4,"path":"api/tags/Ubuntu.json"},{"name":"Docker","slug":"Docker","count":2,"path":"api/tags/Docker.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#1Panel-%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">1Panel 安装</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Ollama-%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">Ollama 安装</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Nvidia-GPU\"><span class=\"toc-text\">Nvidia GPU</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#1-%E9%85%8D%E7%BD%AE%E5%AD%98%E5%82%A8%E5%BA%93\"><span class=\"toc-text\">1.配置存储库</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#2-%E5%AE%89%E8%A3%85-NVIDIA-Container-Toolkit-%E8%BD%AF%E4%BB%B6%E5%8C%85\"><span class=\"toc-text\">2.安装 NVIDIA Container Toolkit 软件包</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#3-%E9%85%8D%E7%BD%AE-Docker-%E4%BD%BF%E7%94%A8-Nvidia-%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F\"><span class=\"toc-text\">3.配置 Docker 使用 Nvidia 驱动程序</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#4-%E5%90%AF%E5%8A%A8%E5%AE%B9%E5%99%A8\"><span class=\"toc-text\">4.启动容器</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#5-%E8%AE%BE%E7%BD%AE%E8%87%AA%E5%90%AF%E5%8A%A8\"><span class=\"toc-text\">5.设置自启动</span></a></li></ol></li></ol></li></ol>","author":{"name":"XARKUR","slug":"blog-author","avatar":"/static/img/logo.png","link":"/","description":"想做的太多，时间却太少<br/>Too much to do, but too little time","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"x":{"icon":"/icons/x.svg","link":"https://x.com/iXARKUR"},"github":{"icon":"/icons/github.svg","link":"https://github.com/XARKUR"},"pinterest":{"icon":"/icons/pinterest.svg","link":"https://www.pinterest.com/ixarkur/"},"dribbble":{"icon":"/icons/dribbble.svg","link":"https://dribbble.com/XARKUR"},"codepen":{"icon":"/icons/codepen.svg","link":"https://codepen.io/XARKUR"}}}},"mapped":true,"hidden":false,"prev_post":{"title":"Ubuntu Open WebUI Docker 安装","uid":"9480f9123c9a967c486fe2c55acf60ce","slug":"Ubuntu Open WebUI Docker 安装","date":"2024-07-16T05:27:18.059Z","updated":"2024-07-16T09:18:24.549Z","comments":true,"path":"api/articles/Ubuntu Open WebUI Docker 安装.json","keywords":null,"cover":null,"text":"1Panel 安装1curl -sSL https://resource.fit2cloud.com/1panel/package/quick_start.sh...","permalink":"/post/Ubuntu Open WebUI Docker 安装","photos":[],"count_time":{"symbolsCount":397,"symbolsTime":"1 mins."},"categories":[{"name":"AIGC","slug":"AIGC","count":3,"path":"api/categories/AIGC.json"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","count":4,"path":"api/tags/Ubuntu.json"},{"name":"Docker","slug":"Docker","count":2,"path":"api/tags/Docker.json"}],"author":{"name":"XARKUR","slug":"blog-author","avatar":"/static/img/logo.png","link":"/","description":"想做的太多，时间却太少<br/>Too much to do, but too little time","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"x":{"icon":"/icons/x.svg","link":"https://x.com/iXARKUR"},"github":{"icon":"/icons/github.svg","link":"https://github.com/XARKUR"},"pinterest":{"icon":"/icons/pinterest.svg","link":"https://www.pinterest.com/ixarkur/"},"dribbble":{"icon":"/icons/dribbble.svg","link":"https://dribbble.com/XARKUR"},"codepen":{"icon":"/icons/codepen.svg","link":"https://codepen.io/XARKUR"}}}},"feature":false},"next_post":{"title":"GDM 登陆界面的 4K HiDPI 缩放设置","uid":"3c7e3175fda2515f5cce3979a5afb287","slug":"GDM 登陆界面的 4K HiDPI 缩放设置","date":"2024-07-16T05:20:56.914Z","updated":"2024-07-16T09:14:01.983Z","comments":true,"path":"api/articles/GDM 登陆界面的 4K HiDPI 缩放设置.json","keywords":null,"cover":null,"text":"使用 Gnome 桌面环境是 Linux 系统下比较省事的选择，搭配它的登陆界面软件是 GDM。在使用 4K 显示器时，我通常会把 Gnome 桌面的缩放设置为...","permalink":"/post/GDM 登陆界面的 4K HiDPI 缩放设置","photos":[],"count_time":{"symbolsCount":447,"symbolsTime":"1 mins."},"categories":[{"name":"Linux","slug":"Linux","count":1,"path":"api/categories/Linux.json"}],"tags":[{"name":"Ubuntu","slug":"Ubuntu","count":4,"path":"api/tags/Ubuntu.json"}],"author":{"name":"XARKUR","slug":"blog-author","avatar":"/static/img/logo.png","link":"/","description":"想做的太多，时间却太少<br/>Too much to do, but too little time","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"x":{"icon":"/icons/x.svg","link":"https://x.com/iXARKUR"},"github":{"icon":"/icons/github.svg","link":"https://github.com/XARKUR"},"pinterest":{"icon":"/icons/pinterest.svg","link":"https://www.pinterest.com/ixarkur/"},"dribbble":{"icon":"/icons/dribbble.svg","link":"https://dribbble.com/XARKUR"},"codepen":{"icon":"/icons/codepen.svg","link":"https://codepen.io/XARKUR"}}}},"feature":false}}